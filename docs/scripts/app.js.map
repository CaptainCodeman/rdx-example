{"version":3,"file":"app.js","sources":["../../../rdx/lib/const-da00a181.js","../../../rdx/lib/connect.js","../../../rdx-model/lib/createStore.js","../../../rdx-model/lib/routing.js","../../node_modules/@captaincodeman/router/router.js","../../src/models/counter.ts","../../src/models/todos.ts","../../src/store.ts","../../src/config.ts","../../../rdx/lib/devtools.js","../../../rdx/lib/persist.js","../../src/ui/app.ts","../../src/ui/counter.ts","../../src/ui/todos.ts","../../src/ui/views.ts"],"sourcesContent":["const s=\"action\",t=\"state\";export{s as d,t as s};\n//# sourceMappingURL=const-da00a181.js.map\n","import{s as t}from\"./const-da00a181.js\";const s=Symbol(),e=Symbol(),i=Symbol(),n=Symbol(),c=Symbol(),o=Symbol(),a=Symbol();function h(h,l){return class extends l{constructor(...t){super(...t),this[a]=this[a].bind(this),this[e]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[i](),this[c]()}disconnectedCallback(){this[o](),this[n](),super.disconnectedCallback&&super.disconnectedCallback()}[e](){this[s]=this.mapEvents?this.mapEvents():{}}[i](){for(const t in this[s])this.addEventListener(t,this[s][t],!1)}[n](){for(const t in this[s])this.removeEventListener(t,this[s][t],!1)}[c](){h.addEventListener(t,this[a]),this[a]()}[o](){this.removeEventListener(t,this[a])}[a](){this.mapState&&Object.assign(this,this.mapState(h.state))}}}export{h as connect};\n//# sourceMappingURL=connect.js.map\n","const t=\"state\";class n extends EventTarget{constructor(t,n){super(),this.state=t,this.reducer=n,this.state=this.reducer(this.state,{})}dispatch(n){const e=new CustomEvent(\"action\",{cancelable:!0,detail:{action:n}});return this.dispatchEvent(e)&&(n=e.detail.action,this.state=this.reducer(this.state,n),this.dispatchEvent(new CustomEvent(t,{detail:{action:n}}))),n}}const e=(t,n)=>n.indexOf(\"/\")>-1?n:t+\"/\"+n,s=(t,n,s)=>{const o=e(n,s);return t.dispatch[n][s]=n=>{const e={type:o,...void 0!==n&&{payload:n}};return t.dispatch(e)},o},o={},c=[],i={dispatchPlugin:{onModel(t,n,e){t.dispatch[n]={};for(const o in e.reducers)s(t,n,o)}},effectsPlugin:{onModel(t,n,e){if(!e.effects)return;const i=t.dispatch[n],r=e.effects(t.dispatch,()=>t.state);for(const e in r){const a=s(t,n,e),d=r[e].bind(i);o[a]?o[a].push(d):o[a]=[d],\"init\"===e&&c.push(d)}},onStore(n){n.addEventListener(t,t=>{const{action:n}=t.detail,e=o[n.type];e&&queueMicrotask(()=>e.forEach(t=>t(n.payload)))}),c.forEach(t=>t())}}},r=t=>{const s={...t.models},o={...i,...t.plugins};for(const t in o){const n=o[t];n.model&&(s[t]=n.model)}const c={};for(const t in s){const n=s[t],o={};for(const s in n.reducers)o[e(t,s)]=n.reducers[s];c[t]=(t=n.state,e)=>{const s=o[e.type];return s?s(t,e.payload):t}}const r=function(t){return(n={},e)=>{const s={};for(const o in t)s[o]=t[o](n[o],e);return s}}(c),a=t&&t.state,d=new n(a,r);for(const t in o){const n=o[t];if(n.onModel)for(const t in s)n.onModel(d,t,s[t])}for(const t in o){const n=o[t];n.onStore&&n.onStore(d)}return d};export{r as createStore};\n//# sourceMappingURL=createStore.js.map\n","import{createModel as t}from\"./createModel.js\";const e=window.history,r=()=>dispatchEvent(new Event(\"popstate\")),a=(a,o)=>{const s={transform:t=>t,...o};return{model:t({state:{page:\"\",params:{}},reducers:{change:(t,e)=>e},effects:(t,a)=>({back(){e.back(),r()},forward(){e.forward(),r()},go(t){e.go(t),r()},push(t){e.pushState(null,\"\",t),r()},replace(t){e.replaceState(null,\"\",t),r()}})}),onStore(t){const o=t.dispatch.routing,c=()=>{const t=a(location.pathname);t&&o.change(s.transform(t))};window.addEventListener(\"popstate\",c),window.addEventListener(\"click\",t=>{const a=n(t);a&&(t.preventDefault(),e.pushState(null,\"\",a),r())}),queueMicrotask(c)}}},n=t=>{const e=(t=>t.composedPath().find(t=>\"A\"===t.tagName))(t);return void 0===e||!e.href.startsWith(document.baseURI)||(t=>t.hasAttribute(\"download\"))(e)||(t=>(t.getAttribute(\"rel\")||\"\").includes(\"external\"))(e)||(t=>t.target)(e)||(t=>t.button&&0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)(t)?null:e.href},o=t=>({...t,queries:function(t){const e={};for(const r of t.entries()){const[t,a]=r,n=e[t];n?Array.isArray(n)?n.push(a):e[t]=[n,a]:e[t]=a}return e}(new URLSearchParams(location.search))});export{a as routingPluginFactory,o as withQuerystring};\n//# sourceMappingURL=routing.js.map\n","// Parses a URL pattern such as `/users/:id`\n// and builds and returns a regex that can be used to\n// match said pattern. Credit for these\n// regexes belongs to Jeremy Ashkenas and the\n// other maintainers of Backbone.js\n//\n// It has been modified for extraction of\n// named paramaters from the URL\nconst parse = (pattern) => {\n    const names = [];\n    // regexes borrowed from backbone\n    pattern = pattern\n        // escapeRegExp\n        .replace(/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n        // optional param\n        .replace(/\\((.*?)\\)/g, '(?:$1)?')\n        // named param\n        .replace(/(\\(\\?)?:\\w+/g, (match, optional) => {\n        names.push(match.slice(1));\n        return optional ? match : '([^/?]+)';\n    })\n        // splatParam\n        .replace(/\\*/g, () => {\n        names.push('path');\n        return '([^?]*?)';\n    });\n    return [new RegExp('^' + pattern + '(?:\\\\?([\\\\s\\\\S]*))?$'), names];\n};\nexport default (routes) => {\n    // loop through each route we're\n    // and build the shell of our\n    // route cache.\n    const patterns = Object.keys(routes);\n    const cache = [];\n    // main result is a function that can be called\n    // with the url\n    return (url) => {\n        for (let i = 0; i < patterns.length; i++) {\n            const pattern = patterns[i];\n            let parsed = cache[i];\n            if (!parsed) {\n                parsed = parse(pattern);\n                cache[i] = parsed;\n            }\n            const match = parsed[0].exec(url);\n            if (match) {\n                const result = match.slice(1, -1);\n                // reduce our match to an object of named paramaters\n                // we've extracted from the url\n                const params = result.reduce((obj, val, index) => {\n                    if (val !== undefined) {\n                        obj[parsed[1][index]] = val;\n                    }\n                    return obj;\n                }, {});\n                return {\n                    page: routes[pattern],\n                    params,\n                };\n            }\n        }\n        return null;\n    };\n};\n","import { createModel } from '@captaincodeman/rdx-model'\n\nexport default createModel({\n  state: 0,\n  reducers: {\n    inc(state) {\n      return state + 1;\n    },\n    dec(state) {\n      return state - 1;\n    },\n  },\n})","import { createModel, RoutingState } from '@captaincodeman/rdx-model';\nimport { GetState } from '@captaincodeman/rdx';\nimport { Dispatch, State } from '../store';\n\nexport interface Todo {\n  userId: number\n  id: number\n  title: string\n  completed: boolean\n}\n\nexport interface TodosState {\n  entities: { [key: number]: Todo }\n  ids: number[]\n  selected: number\n  loading: boolean\n}\n\nconst endpoint = 'https://jsonplaceholder.typicode.com/'\n\nexport default createModel({\n  state: <TodosState>{\n    entities: {},\n    ids: [],\n    selected: 0,\n    loading: false,\n  },\n  reducers: {\n    select(state, payload: number) {\n      return { ...state, selected: payload }\n    },\n\n    request(state) {\n      return { ...state, loading: true };\n    },\n\n    received(state, payload: Todo) {\n      return { ...state,\n        entities: { ...state.entities,\n          [payload.id]: payload,\n        },\n        loading: false,\n      };\n    },\n\n    receivedList(state, payload: Todo[]) {\n      return { ...state,\n        entities: payload.reduce((map: any, todo) => {\n          map[todo.id] = todo\n          return map\n        }, {}),\n        ids: payload.map(todo => todo.id),\n        loading: false,\n      };\n    },\n  },\n\n  effects: (_dispatch: any, getState: GetState) => {\n    const dispatch = _dispatch as Dispatch\n    return {\n      async select(payload: number) {\n        const state: State = getState()\n        if (!state.todos.entities[state.todos.selected]) {\n          // 'this' should be the current models reducer methods\n          // dispatch should be augmented with other models methods\n          // dispatch.todos.request()\n          dispatch.todos.request()\n          const resp = await fetch(`${endpoint}todos/${payload}`)\n          const todo: Todo = await resp.json()\n          dispatch.todos.received(todo)\n        }\n      },\n\n      async load() {\n        const state: State = getState()\n        if (!state.todos.ids.length) {\n          dispatch.todos.request()\n          const resp = await fetch(`${endpoint}todos`)\n          const todos: Todo[] = await resp.json()\n          dispatch.todos.receivedList(todos)\n        }\n      },\n\n      'routing/change': async function(payload: RoutingState) {\n        switch (payload.page) {\n          case 'todos-view':\n            dispatch.todos.load()\n            break\n          case 'todo-view':\n            dispatch.todos.select(parseInt(payload.params.id))\n            break\n        }\n      }\n    }\n}\n})\n","import { createStore, StoreState, StoreDispatch } from '@captaincodeman/rdx-model'\nimport { devtools, persist} from '@captaincodeman/rdx'\nimport { config } from './config'\n\nlet _store = createStore(config)\n\n// These could be commented out if the extra functionality\n// wasn't required, to create a production bundle without\n// the redux devtools enabled for instance. This could be\n// controlled using rollup with the replace plugin, e.g.\n//\n// if (process.env.NODE_ENV !== 'production') {\n//   store = devtools(store)\n// }\n//\n// the bundle size becomes 7.22 Kb minified, 2.8 Kb gzipped\n\n_store = devtools(_store)\n_store = persist(_store)\n\nexport const store = _store\nexport type State = StoreState<typeof config>\nexport type Dispatch = StoreDispatch<typeof config>","import createMatcher from '@captaincodeman/router'\nimport { routingPluginFactory } from '@captaincodeman/rdx-model'\nimport * as models from './models'\n\n// NOTE: the /:app prefix of the routes is to handle github pages being in a subfolder\n//       so is needed for this example, but is *not* required for typical applications\n\nconst routes = {\n  '/:app/':                  'home-view',\n  '/:app/blog':              'blog-view',\n  '/:app/todos':             'todos-view',\n  '/:app/todos/:id':         'todo-view',\n  '/:app/article/:article':  'article-view',\n  '/:app/counter':           'counter-view',\n  '/:app/*':                 'not-found',\n}\n\nconst matcher = createMatcher(routes)\nconst routing = routingPluginFactory(matcher)\n\nexport const config = { models, plugins: { routing } }\n","import{s as t}from\"./const-da00a181.js\";function s(s){const e=window.__REDUX_DEVTOOLS_EXTENSION__;if(e){const n=e.connect();let a=!1;s.addEventListener(t,t=>{const{action:e}=t.detail;a?a=!1:n.send(e,s.state)}),n.subscribe(t=>{\"DISPATCH\"===t.type&&t.state&&(a=!0,s.state=JSON.parse(t.state),s.dispatch({}))}),n.init(s.state)}return s}export{s as devtools};\n//# sourceMappingURL=devtools.js.map\n","import{s as e}from\"./const-da00a181.js\";function t(t,a){const s={name:location.hostname,storage:localStorage,serializer:JSON,filter:e=>!0,persist:e=>e,delay:0,...a},r=s.storage.getItem(s.name);r&&(t.state={...t.state,...s.serializer.parse(r)});let i=0;return t.addEventListener(e,e=>{const{action:a}=e.detail;s.filter(a)&&(i&&window.clearTimeout(i),i=window.setTimeout(()=>{s.storage.setItem(s.name,s.serializer.stringify(s.persist(t.state))),i=0},s.delay))}),t}export{t as persist};\n//# sourceMappingURL=persist.js.map\n","import { connect } from '@captaincodeman/rdx'\nimport { RoutingState } from '@captaincodeman/rdx-model'\nimport { store, State } from '../store'\n\nclass AppShellElement extends connect(store, HTMLElement) {\n  private _page: string = ''\n\n  set route(val: RoutingState) {\n    if (val.page !== this._page) {\n      const el = document.createElement(val.page)\n      this.textContent = ''\n      this.appendChild(el)\n      this._page = val.page\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      route: state.routing\n    }\n  }\n}\n\ncustomElements.define('app-shell', AppShellElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\n\nclass CounterElement extends connect(store, HTMLElement) {\n  set count(val: number) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      count: state.counter\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n      <button id=\"dec\">-</button>\n      <span id=\"count\">${this.count}</span>\n      <button id=\"inc\">+</button>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#count')\n    const dec = <HTMLButtonElement>root.querySelector('#dec')\n    const inc = <HTMLButtonElement>root.querySelector('#inc')\n    dec.addEventListener('click', store.dispatch.counter.dec)\n    inc.addEventListener('click', store.dispatch.counter.inc)\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('counter-view', CounterElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\nimport { Todo } from '../models/todos'\n\nclass TodoListElement extends connect(store, HTMLElement) {\n  set todos(val: Todo[]) {\n    if (this.el && val.length) {\n      const frag = document.createDocumentFragment()\n      val.forEach(todo => {\n        const li = document.createElement('li')\n        li.innerHTML = `<a href=\"./todos/${todo.id}\" ${todo.completed ? 'completed' : ''}>${todo.title}</a>`\n        frag.appendChild(li)\n      })\n      this.el.textContent = ''\n      this.el.appendChild(frag)\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = ''\n      const li = document.createElement('li')\n      li.textContent = 'Loading ...'\n      this.el!.appendChild(li)\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todos: state.todos.ids.map(id => state.todos.entities[id]),\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n    <style>\n      a{\n        text-decoration: none;\n      }\n      a[completed] {\n        text-decoration:line-through;\n      }\n    </style>\n    <ul id=\"todos\"></ul>`\n\n    this.el = <HTMLUListElement>root.querySelector('#todos')\n  }\n\n  private el?: HTMLUListElement\n}\n\ncustomElements.define('todos-view', TodoListElement)\n\nclass TodoItemElement extends connect(store, HTMLElement) {\n  set todo(val: Todo) {\n    if (this.el && val) {\n      this.el.textContent = JSON.stringify(val, null, '  ')\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = 'Loading ...'\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todo: state.todos.entities[state.todos.selected],\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `<pre id=\"todo\"></pre>`\n\n    this.el = <HTMLPreElement>root.querySelector('#todo')\n  }\n\n  private el?: HTMLPreElement\n}\n\ncustomElements.define('todo-view', TodoItemElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from \"../store\"\n\nfunction createView(name: string, content: string) {\n  customElements.define(name, class extends HTMLElement {\n    connectedCallback() {\n      this.textContent = content\n    }\n  })\n}\n\ncreateView('home-view', 'Home Page')\ncreateView('blog-view', 'Blog Page')\ncreateView('not-found', '404: Not Found')\n\nclass ArticleViewElement extends connect(store, HTMLElement) {\n  set article(val: string) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      article: state.routing.params.article\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `Article <span id=\"article\">${this.article}</span>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#article')\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('article-view', ArticleViewElement)\n"],"names":["t","s","Symbol","e","i","n","c","o","a","h","l","[object Object]","super","this","bind","connectedCallback","disconnectedCallback","mapEvents","addEventListener","removeEventListener","mapState","Object","assign","state","EventTarget","reducer","CustomEvent","cancelable","detail","action","dispatchEvent","indexOf","dispatch","type","payload","dispatchPlugin","reducers","effectsPlugin","effects","r","d","push","queueMicrotask","forEach","window","history","Event","composedPath","find","tagName","href","startsWith","document","baseURI","hasAttribute","getAttribute","includes","target","button","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","parse","pattern","names","replace","match","optional","slice","RegExp","inc","dec","endpoint","entities","ids","selected","loading","select","request","received","id","receivedList","reduce","map","todo","_dispatch","getState","todos","resp","fetch","json","length","routing/change","async","page","load","parseInt","params","_store","models","plugins","model","onModel","onStore","createStore","routing","transform","change","back","forward","go","pushState","replaceState","location","pathname","preventDefault","routingPluginFactory","routes","patterns","keys","cache","url","parsed","exec","obj","val","index","undefined","createMatcher","/:app/","/:app/blog","/:app/todos","/:app/todos/:id","/:app/article/:article","/:app/counter","/:app/*","__REDUX_DEVTOOLS_EXTENSION__","connect","send","subscribe","JSON","init","devtools","name","hostname","storage","localStorage","serializer","filter","persist","delay","getItem","clearTimeout","setTimeout","setItem","stringify","store","AppShellElement","HTMLElement","route","_page","el","createElement","textContent","appendChild","customElements","define","CounterElement","root","attachShadow","mode","innerHTML","count","querySelector","counter","TodoListElement","frag","createDocumentFragment","li","completed","title","TodoItemElement","createView","content","ArticleViewElement","article"],"mappings":"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"}