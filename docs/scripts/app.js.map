{"version":3,"file":"app.js","sources":["../../node_modules/@captaincodeman/rdx/lib/const-39efaaf8.js","../../node_modules/@captaincodeman/rdx/lib/connect.js","../../node_modules/@captaincodeman/rdx-model/lib/createModel.js","../../node_modules/@captaincodeman/rdx-model/lib/createStore.js","../../node_modules/@captaincodeman/router/router.js","../../src/routes.ts","../../src/models/counter.ts","../../src/models/todos.ts","../../src/store.ts","../../node_modules/@captaincodeman/rdx-model/lib/routing.js","../../node_modules/@captaincodeman/rdx/lib/devtools.js","../../node_modules/@captaincodeman/rdx/lib/persist.js","../../src/ui/app.ts","../../src/ui/counter.ts","../../src/ui/todos.ts","../../src/ui/views.ts"],"sourcesContent":["const s=\"dispatch\",t=\"state\";export{s as d,t as s};\n//# sourceMappingURL=const-39efaaf8.js.map\n","import{s as t}from\"./const-39efaaf8.js\";const s=Symbol(),e=Symbol(),i=Symbol(),n=Symbol(),c=Symbol(),o=Symbol(),a=Symbol();function h(h,r){return class extends r{constructor(...t){super(...t),this[a]=this[a].bind(this),this[e]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[i](),this[c]()}disconnectedCallback(){this[o](),this[n](),super.disconnectedCallback&&super.disconnectedCallback()}[e](){if(this[s]={},this.mapEvents){const t=this.mapEvents();for(const e in t)this[s][e]=s=>h.dispatch(t[e](s))}}[i](){for(const t in this[s])this.addEventListener(t,this[s][t],!1)}[n](){for(const t in this[s])this.removeEventListener(t,this[s][t],!1)}[c](){h.addEventListener(t,this[a]),this[a]()}[o](){this.removeEventListener(t,this[a])}[a](){this.mapState&&Object.assign(this,this.mapState(h.state))}}}export{h as connect};\n//# sourceMappingURL=connect.js.map\n","const o=o=>o;export{o as createModel};\n//# sourceMappingURL=createModel.js.map\n","const t=(t,e)=>e.indexOf(\"/\")>-1?e:t+\"/\"+e,e=(e,s,n)=>{const o=t(s,n);return e.dispatcher[s][n]=t=>{const s={type:o,...t&&{payload:t}};return e.dispatch(s)},o};const s=\"dispatch\",n=\"state\";class o extends EventTarget{constructor(t,e){super(),this.state=t,this.reducer=e,this.state=this.reducer(this.state,{})}dispatch(t){const e=new CustomEvent(s,{cancelable:!0,detail:{action:t}});return this.dispatchEvent(e)&&(t=e.detail.action,this.state=this.reducer(this.state,t),this.dispatchEvent(new CustomEvent(n,{detail:{action:t}}))),t}}const c=[{onInit(){this.dispatcher={}},onModel(t,s){this.dispatcher[t]={};for(const n in s.reducers)e(this,t,n)}},{onInit(){this.effects={}},onModel(t,s){if(!s.effects)return;const n=this.dispatcher[t];for(const o in s.effects){const c=e(this,t,o),i=s.effects[o].bind(n),a=(t,e,s)=>i(t,e,s);this.effects[c]?this.effects[c].push(a):this.effects[c]=[a]}},onStore(t){t.addEventListener(\"state\",async e=>{const{action:s}=e.detail,n=this.effects[s.type];n&&(await Promise.resolve(),await Promise.all(n.map(e=>e(s.payload,t.state,t.dispatch))))})}}],i=e=>{const s={},n=[...c,...e.plugins||[]],i={...e.models},a={};n.forEach(t=>{t.state&&(i[t.state.name]=t.state.model),t.onInit&&t.onInit.call(s)});for(const e in i){const o=i[e];n.forEach(t=>{t.onModel&&t.onModel.call(s,e,o)});const c={};for(const s in o.reducers)c[t(e,s)]=o.reducers[s];a[e]=function(t=o.state,e){const s=c[e.type];return s?s(t,e.payload):t}}const r=function(t){return(e={},s)=>{for(const n in t)e[n]=t[n](e[n],s);return e}}(a),d=e&&e.state,h=new o(d,r);return s.dispatch=h.dispatch.bind(h),n.forEach(t=>{t.onStore&&t.onStore.call(s,h)}),h.models=s.dispatcher,h};export{i as createStore};\n//# sourceMappingURL=createStore.js.map\n","// Parses a URL pattern such as `/users/:id`\n// and builds and returns a regex that can be used to\n// match said pattern. Credit for these\n// regexes belongs to Jeremy Ashkenas and the\n// other maintainers of Backbone.js\n//\n// It has been modified for extraction of\n// named paramaters from the URL\nconst parse = (pattern) => {\n    const names = [];\n    // regexes borrowed from backbone\n    pattern = pattern\n        // escapeRegExp\n        .replace(/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n        // optional param\n        .replace(/\\((.*?)\\)/g, '(?:$1)?')\n        // named param\n        .replace(/(\\(\\?)?:\\w+/g, (match, optional) => {\n        names.push(match.slice(1));\n        return optional ? match : '([^/?]+)';\n    })\n        // splatParam\n        .replace(/\\*/g, () => {\n        names.push('path');\n        return '([^?]*?)';\n    });\n    return [new RegExp('^' + pattern + '(?:\\\\?([\\\\s\\\\S]*))?$'), names];\n};\nexport default (routes) => {\n    // loop through each route we're\n    // and build the shell of our\n    // route cache.\n    const patterns = Object.keys(routes);\n    const cache = [];\n    // main result is a function that can be called\n    // with the url\n    return (url) => {\n        for (let i = 0; i < patterns.length; i++) {\n            const pattern = patterns[i];\n            let parsed = cache[i];\n            if (!parsed) {\n                parsed = parse(pattern);\n                cache[i] = parsed;\n            }\n            const match = parsed[0].exec(url);\n            if (match) {\n                const result = match.slice(1, -1);\n                // reduce our match to an object of named paramaters\n                // we've extracted from the url\n                const params = result.reduce((obj, val, index) => {\n                    if (val !== undefined) {\n                        obj[parsed[1][index]] = val;\n                    }\n                    return obj;\n                }, {});\n                return {\n                    page: routes[pattern],\n                    params,\n                };\n            }\n        }\n        return null;\n    };\n};\n","import createMatcher from '@captaincodeman/router'\n\n// NOTE: the /:app prefix of the routes is to handle github pages\n\nconst routes = {\n  '/:app/':                  'home-view',\n  '/:app/blog':              'blog-view',\n  '/:app/todos':             'todos-view',\n  '/:app/todos/:id':         'todo-view',\n  '/:app/article/:article':  'article-view',\n  '/:app/counter':           'counter-view',\n  '/:app/*':                 'not-found',\n}\n\nexport const routeMatcher = createMatcher(routes)","import { createModel } from '@captaincodeman/rdx-model'\n\nexport default createModel({\n  state: 0,\n  reducers: {\n    inc(state) {\n      return state + 1;\n    },\n    dec(state) {\n      return state - 1;\n    },\n  },\n})","import { createModel, RoutingState } from '@captaincodeman/rdx-model';\n\nexport interface Todo {\n  userId: number\n  id: number\n  title: string\n  completed: boolean\n}\n\nexport interface TodosState {\n  entities: { [key: number]: Todo }\n  ids: number[]\n  selected: number\n  loading: boolean\n}\n\nconst endpoint = 'https://jsonplaceholder.typicode.com/'\n\nexport default createModel({\n  state: <TodosState>{\n    entities: {},\n    ids: [],\n    selected: 0,\n    loading: false,\n  },\n  reducers: {\n    select(state, payload: number) {\n      return { ...state, selected: payload }\n    },\n\n    request(state) {\n      return { ...state, loading: true };\n    },\n\n    received(state, payload: Todo) {\n      return { ...state,\n        entities: { ...state.entities,\n          [payload.id]: payload,\n        },\n        loading: false,\n      };\n    },\n\n    receivedList(state, payload: Todo[]) {\n      return { ...state,\n        entities: payload.reduce((map, todo) => {\n          map[todo.id] = todo\n          return map\n        }, {}),\n        ids: payload.map(todo => todo.id),\n        loading: false,\n      };\n    },\n  },\n\n  effects: {\n    async select(payload, state) {\n      if (!state.todos.entities[state.todos.selected]) {\n        this.request()\n        const resp = await fetch(`${endpoint}todos/${payload}`)\n        const json = await resp.json()\n        this.received(json)\n      }\n    },\n\n    async load(_, state) {\n      if (!state.todos.ids.length) {\n        this.request()\n        const resp = await fetch(`${endpoint}todos`)\n        const json = await resp.json()\n        this.receivedList(json)\n      }\n    },\n\n    'routing/change': async function(payload: RoutingState) {\n      switch (payload.page) {\n        case 'todos-view':\n          this.load()\n          break\n        case 'todo-view':\n          this.select(parseInt(payload.params.id))\n          break\n      }\n    }\n  }\n})\n","import { createStore, routingPluginFactory, RootState, RoutingState } from '@captaincodeman/rdx-model'\nimport { devtools, persist } from '@captaincodeman/rdx'\nimport { routeMatcher } from './routes'\nimport * as models from './models'\n\nconst routingPlugin = routingPluginFactory(routeMatcher)\n\nlet store = createStore({ models, plugins: [routingPlugin] })\n\nstore = persist(store)\nstore = devtools(store)\n\nexport { store }\n\nexport type Store = typeof store\nexport type State = RootState<typeof models> & { routing: RoutingState }","import{createModel as t}from\"./createModel.js\";const e=e=>({state:{name:\"routing\",model:t({state:{page:\"\",params:{}},reducers:{change:(t,e)=>e}}),effects:{push(t){history.pushState(null,\"\",t),dispatchEvent(new Event(\"popstate\"))},replace(t){history.replaceState(null,\"\",t),dispatchEvent(new Event(\"popstate\"))}}},onStore(t){!async function(t,e){const n=()=>{const n=t(location.pathname);e.routing.change(n)};window.addEventListener(\"popstate\",n);const a=t=>{if(t.button&&0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)return;const e=t.composedPath().find(t=>\"A\"===t.tagName);if(!e||e.target||e.hasAttribute(\"download\")||\"external\"===e.getAttribute(\"rel\"))return;const a=e.href;a&&-1===a.indexOf(\"mailto:\")&&(t.preventDefault(),a!==location.href&&(history.pushState(null,\"\",a),n()))};window.addEventListener(\"DOMContentLoaded\",()=>{window.document.body.addEventListener(\"click\",a)}),await Promise.resolve(),n()}(e,this.dispatcher)}});export{e as routingPluginFactory};\n//# sourceMappingURL=routing.js.map\n","import{s as t}from\"./const-39efaaf8.js\";function e(e){const s=window.__REDUX_DEVTOOLS_EXTENSION__;if(s){const n=s.connect();let a=!1;e.addEventListener(t,t=>{const{action:s}=t.detail;a?a=!1:n.send(s,e.state)}),n.subscribe(t=>{\"DISPATCH\"===t.type&&t.state&&(a=!0,e.state=JSON.parse(t.state),e.dispatch({}))}),n.init(e.state)}return e}export{e as devtools};\n//# sourceMappingURL=devtools.js.map\n","import{s as t}from\"./const-39efaaf8.js\";function e(e,a){const o={name:location.hostname,filter:t=>!0,persist:t=>t,delay:0,...a},s=localStorage.getItem(o.name);s&&(e.state={...e.state,...JSON.parse(s)});let n=0;return e.addEventListener(t,t=>{const a=t,{action:s}=a.detail;o.filter(s)&&(n&&window.clearTimeout(n),n=window.setTimeout(()=>{localStorage.setItem(o.name,JSON.stringify(o.persist(e.state))),n=0},o.delay))}),e}export{e as persist};\n//# sourceMappingURL=persist.js.map\n","import { connect } from '@captaincodeman/rdx'\nimport { RoutingState } from '@captaincodeman/rdx-model'\nimport { store, State } from '../store'\n\nclass AppShellElement extends connect(store, HTMLElement) {\n  private _page: string = ''\n\n  set route(val: RoutingState) {\n    if (val.page !== this._page) {\n      const el = document.createElement(val.page)\n      this.textContent = ''\n      this.appendChild(el)\n      this._page = val.page\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      route: state.routing\n    }\n  }\n}\n\ncustomElements.define('app-shell', AppShellElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\n\nclass CounterElement extends connect(store, HTMLElement) {\n  set count(val: number) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      count: state.counter\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n      <button id=\"dec\">-</button>\n      <span id=\"count\">${this.count}</span>\n      <button id=\"inc\">+</button>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#count')\n    const dec = <HTMLButtonElement>root.querySelector('#dec')\n    const inc = <HTMLButtonElement>root.querySelector('#inc')\n    dec.addEventListener('click', store.models.counter.dec)\n    inc.addEventListener('click', store.models.counter.inc)\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('counter-view', CounterElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\nimport { Todo } from '../models/todos'\n\nclass TodoListElement extends connect(store, HTMLElement) {\n  set todos(val: Todo[]) {\n    if (this.el && val.length) {\n      const frag = document.createDocumentFragment()\n      val.forEach(todo => {\n        const li = document.createElement('li')\n        li.innerHTML = `<a href=\"/todos/${todo.id}\" ${todo.completed ? 'completed' : ''}>${todo.title}</a>`\n        frag.appendChild(li)\n      })\n      this.el.textContent = ''\n      this.el.appendChild(frag)\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = ''\n      const li = document.createElement('li')\n      li.textContent = 'Loading ...'\n      this.el!.appendChild(li)\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todos: state.todos.ids.map(id => state.todos.entities[id]),\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n    <style>\n      a{\n        text-decoration: none;\n      }\n      a[completed] {\n        text-decoration:line-through;\n      }\n    </style>\n    <ul id=\"todos\"></ul>`\n\n    this.el = <HTMLUListElement>root.querySelector('#todos')\n  }\n\n  private el?: HTMLUListElement\n}\n\ncustomElements.define('todos-view', TodoListElement)\n\nclass TotoItemElement extends connect(store, HTMLElement) {\n  set todo(val: Todo) {\n    if (this.el && val) {\n      this.el.textContent = JSON.stringify(val, null, '  ')\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = 'Loading ...'\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todo: state.todos.entities[state.todos.selected],\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `<pre id=\"todo\"></pre>`\n\n    this.el = <HTMLPreElement>root.querySelector('#todo')\n  }\n\n  private el?: HTMLPreElement\n}\n\ncustomElements.define('todo-view', TotoItemElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from \"../store\"\n\nfunction createView(name: string, content: string) {\n  customElements.define(name, class extends HTMLElement {\n    connectedCallback() {\n      this.textContent = content\n    }\n  })\n}\n\ncreateView('home-view', 'Home Page')\ncreateView('blog-view', 'Blog Page')\ncreateView('not-found', '404: Not Found')\n\nclass ArticleViewElement extends connect(store, HTMLElement) {\n  set article(val: string) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      article: state.routing.params.article\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `Article <span id=\"article\">${this.article}</span>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#article')\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('article-view', ArticleViewElement)\n"],"names":["t","s","Symbol","e","i","n","c","o","a","h","r","[object Object]","super","this","bind","connectedCallback","disconnectedCallback","mapEvents","dispatch","addEventListener","removeEventListener","mapState","Object","assign","state","indexOf","dispatcher","type","payload","EventTarget","reducer","CustomEvent","cancelable","detail","action","dispatchEvent","reducers","effects","push","async","Promise","resolve","all","map","parse","pattern","names","replace","match","optional","slice","RegExp","routeMatcher","routes","patterns","keys","cache","url","length","parsed","exec","params","reduce","obj","val","index","undefined","page","createMatcher","/:app/","/:app/blog","/:app/todos","/:app/todos/:id","/:app/article/:article","/:app/counter","/:app/*","createModel","inc","dec","endpoint","entities","ids","selected","loading","select","request","received","id","receivedList","todo","todos","resp","fetch","json","_","routing/change","load","parseInt","store","plugins","models","forEach","name","model","onInit","call","onModel","d","onStore","createStore","change","history","pushState","Event","replaceState","location","pathname","routing","window","button","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","composedPath","find","tagName","target","hasAttribute","getAttribute","href","preventDefault","document","body","routingPluginFactory","__REDUX_DEVTOOLS_EXTENSION__","connect","send","subscribe","JSON","init","devtools","hostname","filter","persist","delay","localStorage","getItem","clearTimeout","setTimeout","setItem","stringify","AppShellElement","HTMLElement","route","_page","el","createElement","textContent","appendChild","customElements","define","CounterElement","root","attachShadow","mode","innerHTML","count","querySelector","counter","TodoListElement","frag","createDocumentFragment","li","completed","title","TotoItemElement","createView","content","ArticleViewElement","article"],"mappings":"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"}