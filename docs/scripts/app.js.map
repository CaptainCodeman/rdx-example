{"version":3,"file":"app.js","sources":["../../node_modules/@captaincodeman/rdx/lib/const-da00a181.js","../../node_modules/@captaincodeman/rdx/lib/connect.js","../../node_modules/@captaincodeman/rdx-model/lib/createModel.js","../../node_modules/@captaincodeman/rdx-model/lib/createStore.js","../../node_modules/@captaincodeman/rdx-model/lib/routing.js","../../node_modules/@captaincodeman/router/router.js","../../src/routes.ts","../../src/models/counter.ts","../../src/models/todos.ts","../../src/store.ts","../../node_modules/@captaincodeman/rdx/lib/devtools.js","../../node_modules/@captaincodeman/rdx/lib/persist.js","../../src/ui/app.ts","../../src/ui/counter.ts","../../src/ui/todos.ts","../../src/ui/views.ts"],"sourcesContent":["const s=\"action\",t=\"state\";export{s as d,t as s};\n//# sourceMappingURL=const-da00a181.js.map\n","import{s as t}from\"./const-da00a181.js\";const s=Symbol(),e=Symbol(),i=Symbol(),n=Symbol(),c=Symbol(),o=Symbol(),a=Symbol();function h(h,l){return class extends l{constructor(...t){super(...t),this[a]=this[a].bind(this),this[e]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[i](),this[c]()}disconnectedCallback(){this[o](),this[n](),super.disconnectedCallback&&super.disconnectedCallback()}[e](){this[s]=this.mapEvents?this.mapEvents():{}}[i](){for(const t in this[s])this.addEventListener(t,this[s][t],!1)}[n](){for(const t in this[s])this.removeEventListener(t,this[s][t],!1)}[c](){h.addEventListener(t,this[a]),this[a]()}[o](){this.removeEventListener(t,this[a])}[a](){this.mapState&&Object.assign(this,this.mapState(h.state))}}}export{h as connect};\n//# sourceMappingURL=connect.js.map\n","const o=o=>o;export{o as createModel};\n//# sourceMappingURL=createModel.js.map\n","const t=(t,e)=>e.indexOf(\"/\")>-1?e:t+\"/\"+e,e=(e,s,n)=>{const o=t(s,n);return e.dispatch[s][n]=t=>{const s={type:o,...void 0!==t&&{payload:t}};return e.dispatch(s)},o};const s=\"state\";class n extends EventTarget{constructor(t,e){super(),this.state=t,this.reducer=e,this.state=this.reducer(this.state,{})}dispatch(t){const e=new CustomEvent(\"action\",{cancelable:!0,detail:{action:t}});return this.dispatchEvent(e)&&(t=e.detail.action,this.state=this.reducer(this.state,t),this.dispatchEvent(new CustomEvent(s,{detail:{action:t}}))),t}}const o={},c=[],r=[{onModel(t,s,n){t.dispatch[s]={};for(const o in n.reducers)e(t,s,o)}},{onModel(t,s,n){if(!n.effects)return;const r=t.dispatch[s],a=n.effects(t.dispatch,()=>t.state);for(const n in a){const i=e(t,s,n),d=a[n].bind(r);o[i]?o[i].push(d):o[i]=[d],\"init\"===n&&c.push(d)}},onStore(t){t.addEventListener(s,t=>{const{action:e}=t.detail,s=o[e.type];s&&queueMicrotask(()=>s.forEach(t=>t(e.payload)))}),c.forEach(t=>t())}}],a=e=>{const s={...e.models},o=[...r,...e.plugins||[]];o.forEach(t=>{t.state&&(s[t.state.name]=t.state.model)});const c={};for(const e in s){const n=s[e],o={};for(const s in n.reducers)o[t(e,s)]=n.reducers[s];c[e]=(t=n.state,e)=>{const s=o[e.type];return s?s(t,e.payload):t}}const a=function(t){return(e={},s)=>{const n={};for(const o in t)n[o]=t[o](e[o],s);return n}}(c),i=e&&e.state,d=new n(i,a);return o.forEach(t=>{if(t.onModel)for(const e in s)t.onModel(d,e,s[e])}),o.forEach(t=>{t.onStore&&t.onStore(d)}),d};export{a as createStore};\n//# sourceMappingURL=createStore.js.map\n","import{createModel as t}from\"./createModel.js\";const e=window.history,r=()=>dispatchEvent(new Event(\"popstate\")),a=(a,o)=>{const s={transform:t=>t,...o};return{state:{name:\"routing\",model:t({state:{page:\"\",params:{}},reducers:{change:(t,e)=>e},effects:(t,a)=>({back(){e.back(),r()},forward(){e.forward(),r()},go(t){e.go(t),r()},push(t){e.pushState(null,\"\",t),r()},replace(t){e.replaceState(null,\"\",t),r()}})})},onStore(t){const o=t.dispatch.routing,c=()=>{const t=a(location.pathname);t&&o.change(s.transform(t))};window.addEventListener(\"popstate\",c),window.addEventListener(\"click\",t=>{const a=n(t);a&&(t.preventDefault(),e.pushState(null,\"\",a),r())}),queueMicrotask(c)}}},n=t=>{const e=(t=>t.composedPath().find(t=>\"A\"===t.tagName))(t);return void 0===e||!e.href.startsWith(document.baseURI)||(t=>t.hasAttribute(\"download\"))(e)||(t=>(t.getAttribute(\"rel\")||\"\").includes(\"external\"))(e)||(t=>t.target)(e)||(t=>t.button&&0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)(t)?null:e.href},o=t=>({...t,queries:function(t){const e={};for(const r of t.entries()){const[t,a]=r,n=e[t];n?Array.isArray(n)?n.push(a):e[t]=[n,a]:e[t]=a}return e}(new URLSearchParams(location.search))});export{a as routingPluginFactory,o as withQuerystring};\n//# sourceMappingURL=routing.js.map\n","// Parses a URL pattern such as `/users/:id`\n// and builds and returns a regex that can be used to\n// match said pattern. Credit for these\n// regexes belongs to Jeremy Ashkenas and the\n// other maintainers of Backbone.js\n//\n// It has been modified for extraction of\n// named paramaters from the URL\nconst parse = (pattern) => {\n    const names = [];\n    // regexes borrowed from backbone\n    pattern = pattern\n        // escapeRegExp\n        .replace(/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n        // optional param\n        .replace(/\\((.*?)\\)/g, '(?:$1)?')\n        // named param\n        .replace(/(\\(\\?)?:\\w+/g, (match, optional) => {\n        names.push(match.slice(1));\n        return optional ? match : '([^/?]+)';\n    })\n        // splatParam\n        .replace(/\\*/g, () => {\n        names.push('path');\n        return '([^?]*?)';\n    });\n    return [new RegExp('^' + pattern + '(?:\\\\?([\\\\s\\\\S]*))?$'), names];\n};\nexport default (routes) => {\n    // loop through each route we're\n    // and build the shell of our\n    // route cache.\n    const patterns = Object.keys(routes);\n    const cache = [];\n    // main result is a function that can be called\n    // with the url\n    return (url) => {\n        for (let i = 0; i < patterns.length; i++) {\n            const pattern = patterns[i];\n            let parsed = cache[i];\n            if (!parsed) {\n                parsed = parse(pattern);\n                cache[i] = parsed;\n            }\n            const match = parsed[0].exec(url);\n            if (match) {\n                const result = match.slice(1, -1);\n                // reduce our match to an object of named paramaters\n                // we've extracted from the url\n                const params = result.reduce((obj, val, index) => {\n                    if (val !== undefined) {\n                        obj[parsed[1][index]] = val;\n                    }\n                    return obj;\n                }, {});\n                return {\n                    page: routes[pattern],\n                    params,\n                };\n            }\n        }\n        return null;\n    };\n};\n","import createMatcher from '@captaincodeman/router'\n\n// NOTE: the /:app prefix of the routes is to handle github pages\n//       using a subfolder and is not required for normal app use\n\nconst routes = {\n  '/:app/':                  'home-view',\n  '/:app/blog':              'blog-view',\n  '/:app/todos':             'todos-view',\n  '/:app/todos/:id':         'todo-view',\n  '/:app/article/:article':  'article-view',\n  '/:app/counter':           'counter-view',\n  '/:app/*':                 'not-found',\n}\n\nexport const routeMatcher = createMatcher(routes)","import { createModel } from '@captaincodeman/rdx-model'\n\nexport default createModel({\n  state: 0,\n  reducers: {\n    inc(state) {\n      return state + 1;\n    },\n    dec(state) {\n      return state - 1;\n    },\n  },\n})","import { createModel, RoutingState } from '@captaincodeman/rdx-model';\nimport { State, Dispatch } from '../store';\n\nexport interface Todo {\n  userId: number\n  id: number\n  title: string\n  completed: boolean\n}\n\nexport interface TodosState {\n  entities: { [key: number]: Todo }\n  ids: number[]\n  selected: number\n  loading: boolean\n}\n\nconst endpoint = 'https://jsonplaceholder.typicode.com/'\n\nexport default createModel({\n  state: <TodosState>{\n    entities: {},\n    ids: [],\n    selected: 0,\n    loading: false,\n  },\n  reducers: {\n    select(state, payload: number) {\n      return { ...state, selected: payload }\n    },\n\n    request(state) {\n      return { ...state, loading: true };\n    },\n\n    received(state, payload: Todo) {\n      return { ...state,\n        entities: { ...state.entities,\n          [payload.id]: payload,\n        },\n        loading: false,\n      };\n    },\n\n    receivedList(state, payload: Todo[]) {\n      return { ...state,\n        entities: payload.reduce((map, todo) => {\n          map[todo.id] = todo\n          return map\n        }, {}),\n        ids: payload.map(todo => todo.id),\n        loading: false,\n      };\n    },\n  },\n\n  effects: (dispatch: Dispatch, getState) => ({\n    async select(payload: number) {\n      const state: State = getState()\n      if (!state.todos.entities[state.todos.selected]) {\n        // 'this' should be the current models reducer methods\n        // dispatch should be augmented with other models methods\n        // dispatch.todos.request()\n        dispatch.todos.request()\n        const resp = await fetch(`${endpoint}todos/${payload}`)\n        const json = await resp.json()\n        dispatch.todos.received(json)\n      }\n    },\n\n    async load() {\n      const state: State = getState()\n      if (!state.todos.ids.length) {\n        dispatch.todos.request()\n        const resp = await fetch(`${endpoint}todos`)\n        const json = await resp.json()\n        dispatch.todos.receivedList(json)\n      }\n    },\n\n    'routing/change': async function(payload: RoutingState) {\n      switch (payload.page) {\n        case 'todos-view':\n          dispatch.todos.load()\n          break\n        case 'todo-view':\n          dispatch.todos.select(parseInt(payload.params.id))\n          break\n      }\n    }\n  })\n})\n","import { createStore, routingPluginFactory, ModelsState, ModelsDispatch, RoutingState, RoutingDispatch } from '@captaincodeman/rdx-model'\nimport { devtools, persist} from '@captaincodeman/rdx'\nimport { routeMatcher } from './routes'\nimport * as models from './models'\n\nconst routingPlugin = routingPluginFactory(routeMatcher)\n\nlet store = createStore({ models, plugins: [routingPlugin] })\n\n// These could be commented out if the extra functionality\n// wasn't required, to create a production bundle without\n// the redux devtools enabled for instance. This could be\n// controlled using rollup with the replace plugin, e.g.\n//\n// if (process.env.NODE_ENV !== 'production') {\n//   store = devtools(store)\n// }\n//\n// the bundle size becomes 7.22 Kb minified, 2.8 Kb gzipped\n\nstore = devtools(store)\nstore = persist(store)\n\nexport { store }\n\nexport type Store = typeof store;\n\nexport interface State extends ModelsState<typeof models> { routing: RoutingState }\nexport interface Dispatch extends ModelsDispatch<typeof models> { routing: RoutingDispatch }\n\n","import{s as t}from\"./const-da00a181.js\";function s(s){const e=window.__REDUX_DEVTOOLS_EXTENSION__;if(e){const n=e.connect();let a=!1;s.addEventListener(t,t=>{const{action:e}=t.detail;a?a=!1:n.send(e,s.state)}),n.subscribe(t=>{\"DISPATCH\"===t.type&&t.state&&(a=!0,s.state=JSON.parse(t.state),s.dispatch({}))}),n.init(s.state)}return s}export{s as devtools};\n//# sourceMappingURL=devtools.js.map\n","import{s as e}from\"./const-da00a181.js\";function t(t,a){const s={name:location.hostname,storage:localStorage,serializer:JSON,filter:e=>!0,persist:e=>e,delay:0,...a},r=s.storage.getItem(s.name);r&&(t.state={...t.state,...s.serializer.parse(r)});let i=0;return t.addEventListener(e,e=>{const{action:a}=e.detail;s.filter(a)&&(i&&window.clearTimeout(i),i=window.setTimeout(()=>{s.storage.setItem(s.name,s.serializer.stringify(s.persist(t.state))),i=0},s.delay))}),t}export{t as persist};\n//# sourceMappingURL=persist.js.map\n","import { connect } from '@captaincodeman/rdx'\nimport { RoutingState } from '@captaincodeman/rdx-model'\nimport { store, State } from '../store'\n\nclass AppShellElement extends connect(store, HTMLElement) {\n  private _page: string = ''\n\n  set route(val: RoutingState) {\n    if (val.page !== this._page) {\n      const el = document.createElement(val.page)\n      this.textContent = ''\n      this.appendChild(el)\n      this._page = val.page\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      route: state.routing\n    }\n  }\n}\n\ncustomElements.define('app-shell', AppShellElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\n\nclass CounterElement extends connect(store, HTMLElement) {\n  set count(val: number) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      count: state.counter\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n      <button id=\"dec\">-</button>\n      <span id=\"count\">${this.count}</span>\n      <button id=\"inc\">+</button>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#count')\n    const dec = <HTMLButtonElement>root.querySelector('#dec')\n    const inc = <HTMLButtonElement>root.querySelector('#inc')\n    dec.addEventListener('click', store.dispatch.counter.dec)\n    inc.addEventListener('click', store.dispatch.counter.inc)\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('counter-view', CounterElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\nimport { Todo } from '../models/todos'\n\nclass TodoListElement extends connect(store, HTMLElement) {\n  set todos(val: Todo[]) {\n    if (this.el && val.length) {\n      const frag = document.createDocumentFragment()\n      val.forEach(todo => {\n        const li = document.createElement('li')\n        li.innerHTML = `<a href=\"./todos/${todo.id}\" ${todo.completed ? 'completed' : ''}>${todo.title}</a>`\n        frag.appendChild(li)\n      })\n      this.el.textContent = ''\n      this.el.appendChild(frag)\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = ''\n      const li = document.createElement('li')\n      li.textContent = 'Loading ...'\n      this.el!.appendChild(li)\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todos: state.todos.ids.map(id => state.todos.entities[id]),\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n    <style>\n      a{\n        text-decoration: none;\n      }\n      a[completed] {\n        text-decoration:line-through;\n      }\n    </style>\n    <ul id=\"todos\"></ul>`\n\n    this.el = <HTMLUListElement>root.querySelector('#todos')\n  }\n\n  private el?: HTMLUListElement\n}\n\ncustomElements.define('todos-view', TodoListElement)\n\nclass TodoItemElement extends connect(store, HTMLElement) {\n  set todo(val: Todo) {\n    if (this.el && val) {\n      this.el.textContent = JSON.stringify(val, null, '  ')\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = 'Loading ...'\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todo: state.todos.entities[state.todos.selected],\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `<pre id=\"todo\"></pre>`\n\n    this.el = <HTMLPreElement>root.querySelector('#todo')\n  }\n\n  private el?: HTMLPreElement\n}\n\ncustomElements.define('todo-view', TodoItemElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from \"../store\"\n\nfunction createView(name: string, content: string) {\n  customElements.define(name, class extends HTMLElement {\n    connectedCallback() {\n      this.textContent = content\n    }\n  })\n}\n\ncreateView('home-view', 'Home Page')\ncreateView('blog-view', 'Blog Page')\ncreateView('not-found', '404: Not Found')\n\nclass ArticleViewElement extends connect(store, HTMLElement) {\n  set article(val: string) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      article: state.routing.params.article\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `Article <span id=\"article\">${this.article}</span>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#article')\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('article-view', ArticleViewElement)\n"],"names":["t","s","Symbol","e","i","n","c","o","a","h","l","[object Object]","super","this","bind","connectedCallback","disconnectedCallback","mapEvents","addEventListener","removeEventListener","mapState","Object","assign","state","indexOf","dispatch","type","payload","EventTarget","reducer","CustomEvent","cancelable","detail","action","dispatchEvent","r","reducers","effects","d","push","queueMicrotask","forEach","window","history","Event","composedPath","find","tagName","href","startsWith","document","baseURI","hasAttribute","getAttribute","includes","target","button","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","parse","pattern","names","replace","match","optional","slice","RegExp","routeMatcher","routes","patterns","keys","cache","url","length","parsed","exec","params","reduce","obj","val","index","undefined","page","createMatcher","/:app/","/:app/blog","/:app/todos","/:app/todos/:id","/:app/article/:article","/:app/counter","/:app/*","inc","dec","endpoint","entities","ids","selected","loading","select","request","received","id","receivedList","map","todo","getState","todos","resp","fetch","json","routing/change","async","load","parseInt","store","models","plugins","name","model","onModel","onStore","createStore","transform","change","back","forward","go","pushState","replaceState","routing","location","pathname","preventDefault","routingPluginFactory","__REDUX_DEVTOOLS_EXTENSION__","connect","send","subscribe","JSON","init","devtools","hostname","storage","localStorage","serializer","filter","persist","delay","getItem","clearTimeout","setTimeout","setItem","stringify","AppShellElement","HTMLElement","route","_page","el","createElement","textContent","appendChild","customElements","define","CounterElement","root","attachShadow","mode","innerHTML","count","querySelector","counter","TodoListElement","frag","createDocumentFragment","li","completed","title","TodoItemElement","createView","content","ArticleViewElement","article"],"mappings":"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"}