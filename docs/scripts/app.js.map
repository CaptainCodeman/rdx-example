{"version":3,"file":"app.js","sources":["../../../rdx/lib/const.js","../../../rdx/lib/connect.js","../../../rdx/lib/store.js","../../../rdx/lib/createStore.js","../../../rdx/lib/routing.js","../../node_modules/@captaincodeman/router/router.js","../../src/models/counter.ts","../../src/models/todos.ts","../../src/store.ts","../../../rdx/lib/combineReducers.js","../../src/config.ts","../../../rdx/lib/devtools.js","../../../rdx/lib/persist.js","../../src/ui/app.ts","../../src/ui/counter.ts","../../src/ui/todos.ts","../../src/ui/views.ts"],"sourcesContent":["const t=\"action\",o=\"state\";export{t as dispatchEvent,o as stateEvent};\n//# sourceMappingURL=const.js.map\n","import{stateEvent as t}from\"./const.js\";const s=Symbol(),e=Symbol(),i=Symbol(),n=Symbol(),c=Symbol(),o=Symbol(),h=Symbol();function a(a,l){return class extends l{constructor(...t){super(...t),this[h]=this[h].bind(this),this[e]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[i](),this[c]()}disconnectedCallback(){this[o](),this[n](),super.disconnectedCallback&&super.disconnectedCallback()}[e](){this[s]=this.mapEvents?this.mapEvents():{}}[i](){for(const t in this[s])this.addEventListener(t,this[s][t],!1)}[n](){for(const t in this[s])this.removeEventListener(t,this[s][t],!1)}[c](){a.addEventListener(t,this[h]),this[h]()}[o](){this.removeEventListener(t,this[h])}[h](){this.mapState&&Object.assign(this,this.mapState(a.state))}}}export{a as connect};\n//# sourceMappingURL=connect.js.map\n","import{dispatchEvent as t,stateEvent as e}from\"./const.js\";class s extends EventTarget{constructor(t,e){super(),this.state=t,this.reducer=e,this.state=this.reducer(this.state,{})}dispatch(s){const i=new CustomEvent(t,{cancelable:!0,detail:{action:s}});return this.dispatchEvent(i)&&(s=i.detail.action,this.state=this.reducer(this.state,s),this.dispatchEvent(new CustomEvent(e,{detail:{action:s}}))),s}}export{s as Store};\n//# sourceMappingURL=store.js.map\n","import{combineReducers as o}from\"./combineReducers.js\";import{stateEvent as t}from\"./const.js\";import{Store as n}from\"./store.js\";const s=(o,t)=>t.indexOf(\"/\")>-1?t:o+\"/\"+t,e=(o,t,n)=>{const e=s(t,n);return o.dispatch[t][n]=t=>{const n={type:e,...void 0!==t&&{payload:t}};return o.dispatch(n)},e},c={},r=[],i={dispatchPlugin:{onModel(o,t,n){o.dispatch[t]={};for(const s in n.reducers)e(o,t,s)}},effectsPlugin:{onModel(o,t,n){if(!n.effects)return;const s=n.effects({dispatch:()=>o.dispatch,getState:()=>o.state});for(const n in s){const i=e(o,t,n),d=s[n];c[i]?c[i].push(d):c[i]=[d],\"init\"===n&&r.push(d)}},onStore(o){o.addEventListener(t,o=>{const{action:t}=o.detail,n=c[t.type];n&&queueMicrotask(()=>n.forEach(o=>o(t.payload)))}),r.forEach(o=>o())}}},d=t=>{const e={...t.models},c={...i,...t.plugins};for(const o in c){const t=c[o];t.model&&(e[o]=t.model)}const r={};for(const o in e){const t=e[o],n={};for(const e in t.reducers)n[s(o,e)]=t.reducers[e];r[o]=(o=t.state,s)=>{const e=n[s.type];return e?e(o,s.payload):o}}const d=o(r),a=t&&t.state,f=new n(a,d);for(const o in c){const t=c[o];if(t.onModel)for(const o in e)t.onModel(f,o,e[o])}for(const o in c){const t=c[o];t.onStore&&t.onStore(f)}return f};export{d as createStore};\n//# sourceMappingURL=createStore.js.map\n","import{createModel as t}from\"./createModel.js\";const e=window.history,r=()=>dispatchEvent(new Event(\"popstate\")),a=(a,o)=>{const s={transform:t=>t,...o};return{model:t({state:{page:\"\",params:{}},reducers:{change:(t,e)=>e},effects:t=>({back(){e.back(),r()},forward(){e.forward(),r()},go(t){e.go(t),r()},push(t){e.pushState(null,\"\",t),r()},replace(t){e.replaceState(null,\"\",t),r()}})}),onStore(t){const o=t.dispatch.routing,c=()=>{const t=a(location.pathname);t&&o.change(s.transform(t))};window.addEventListener(\"popstate\",c),window.addEventListener(\"click\",t=>{const a=n(t);a&&(t.preventDefault(),e.pushState(null,\"\",a),r())}),queueMicrotask(c)}}},n=t=>{const e=(t=>t.composedPath().find(t=>\"A\"===t.tagName))(t);return void 0===e||!e.href.startsWith(document.baseURI)||(t=>t.hasAttribute(\"download\"))(e)||(t=>(t.getAttribute(\"rel\")||\"\").includes(\"external\"))(e)||(t=>t.target)(e)||(t=>t.button&&0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)(t)?null:e.href},o=t=>({...t,queries:function(t){const e={};for(const r of t.entries()){const[t,a]=r,n=e[t];n?Array.isArray(n)?n.push(a):e[t]=[n,a]:e[t]=a}return e}(new URLSearchParams(location.search))});export{a as routingPluginFactory,o as withQuerystring};\n//# sourceMappingURL=routing.js.map\n","// Parses a URL pattern such as `/users/:id`\n// and builds and returns a regex that can be used to\n// match said pattern. Credit for these\n// regexes belongs to Jeremy Ashkenas and the\n// other maintainers of Backbone.js\n//\n// It has been modified for extraction of\n// named paramaters from the URL\nconst parse = (pattern) => {\n    const names = [];\n    // regexes borrowed from backbone\n    pattern = pattern\n        // escapeRegExp\n        .replace(/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n        // optional param\n        .replace(/\\((.*?)\\)/g, '(?:$1)?')\n        // named param\n        .replace(/(\\(\\?)?:\\w+/g, (match, optional) => {\n        names.push(match.slice(1));\n        return optional ? match : '([^/?]+)';\n    })\n        // splatParam\n        .replace(/\\*/g, () => {\n        names.push('path');\n        return '([^?]*?)';\n    });\n    return [new RegExp('^' + pattern + '(?:\\\\?([\\\\s\\\\S]*))?$'), names];\n};\nexport default (routes) => {\n    // loop through each route we're\n    // and build the shell of our\n    // route cache.\n    const patterns = Object.keys(routes);\n    const cache = [];\n    // main result is a function that can be called\n    // with the url\n    return (url) => {\n        for (let i = 0; i < patterns.length; i++) {\n            const pattern = patterns[i];\n            let parsed = cache[i];\n            if (!parsed) {\n                parsed = parse(pattern);\n                cache[i] = parsed;\n            }\n            const match = parsed[0].exec(url);\n            if (match) {\n                const result = match.slice(1, -1);\n                // reduce our match to an object of named paramaters\n                // we've extracted from the url\n                const params = result.reduce((obj, val, index) => {\n                    if (val !== undefined) {\n                        obj[parsed[1][index]] = val;\n                    }\n                    return obj;\n                }, {});\n                return {\n                    page: routes[pattern],\n                    params,\n                };\n            }\n        }\n        return null;\n    };\n};\n","import { createModel } from '@captaincodeman/rdx'\n\nexport default createModel({\n  state: 0,\n  reducers: {\n    inc(state) {\n      return state + 1;\n    },\n    dec(state) {\n      return state - 1;\n    },\n  },\n})","import { createModel, RoutingState } from '@captaincodeman/rdx';\nimport { Store } from '../store';\n\nexport interface Todo {\n  userId: number\n  id: number\n  title: string\n  completed: boolean\n}\n\nexport interface TodosState {\n  entities: { [key: number]: Todo }\n  ids: number[]\n  selected: number\n  loading: boolean\n}\n\nconst endpoint = 'https://jsonplaceholder.typicode.com/'\n\nexport default createModel({\n  state: <TodosState>{\n    entities: {},\n    ids: [],\n    selected: 0,\n    loading: false,\n  },\n  reducers: {\n    select(state, payload: number) {\n      return { ...state, selected: payload }\n    },\n\n    request(state) {\n      return { ...state, loading: true };\n    },\n\n    received(state, payload: Todo) {\n      return { ...state,\n        entities: { ...state.entities,\n          [payload.id]: payload,\n        },\n        loading: false,\n      };\n    },\n\n    receivedList(state, payload: Todo[]) {\n      return { ...state,\n        entities: payload.reduce((map: any, todo) => {\n          map[todo.id] = todo\n          return map\n        }, {}),\n        ids: payload.map(todo => todo.id),\n        loading: false,\n      };\n    },\n  },\n\n  effects: (store: Store) => ({\n    async select(payload: number) {\n      const dispatch = store.dispatch()\n      const state = store.getState()\n      if (!state.todos.entities[state.todos.selected]) {\n        // 'this' should be the current models reducer methods\n        // dispatch should be augmented with other models methods\n        // dispatch.todos.request()\n        dispatch.todos.request()\n        const resp = await fetch(`${endpoint}todos/${payload}`)\n        const todo: Todo = await resp.json()\n        dispatch.todos.received(todo)\n      }\n    },\n\n    async load() {\n      const dispatch = store.dispatch()\n      const state = store.getState()\n      if (!state.todos.ids.length) {\n        dispatch.todos.request()\n        const resp = await fetch(`${endpoint}todos`)\n        const todos: Todo[] = await resp.json()\n        dispatch.todos.receivedList(todos)\n      }\n    },\n\n    'routing/change': async function(payload: RoutingState) {\n      const dispatch = store.dispatch()\n      switch (payload.page) {\n        case 'todos-view':\n          dispatch.todos.load()\n          break\n        case 'todo-view':\n          dispatch.todos.select(parseInt(payload.params.id))\n          break\n      }\n    }\n  })\n})\n","import { createStore, StoreState, StoreDispatch, ModelStore } from '@captaincodeman/rdx'\nimport { devtools, persist} from '@captaincodeman/rdx'\nimport { config } from './config'\n\nlet _store = createStore(config)\n\n// These could be commented out if the extra functionality\n// wasn't required, to create a production bundle without\n// the redux devtools enabled for instance. This could be\n// controlled using rollup with the replace plugin, e.g.\n//\n// if (process.env.NODE_ENV !== 'production') {\n//   store = devtools(store)\n// }\n//\n// the bundle size becomes 7.22 Kb minified, 2.8 Kb gzipped\n\n_store = devtools(_store)\n_store = persist(_store)\n\nexport const store = _store\n\nexport interface State extends StoreState<typeof config> {}\nexport interface Dispatch extends StoreDispatch<typeof config> {}\nexport interface Store extends ModelStore<Dispatch, State> {}","function n(n){return(r={},t)=>{const o={};for(const c in n)o[c]=n[c](r[c],t);return o}}export{n as combineReducers};\n//# sourceMappingURL=combineReducers.js.map\n","import createMatcher from '@captaincodeman/router'\nimport { routingPluginFactory } from '@captaincodeman/rdx'\nimport * as models from './models'\n\n// NOTE: the /:app prefix of the routes is to handle github pages being in a subfolder\n//       so is needed for this example, but is *not* required for typical applications\n\nconst routes = {\n  '/:app/':                  'home-view',\n  '/:app/blog':              'blog-view',\n  '/:app/todos':             'todos-view',\n  '/:app/todos/:id':         'todo-view',\n  '/:app/article/:article':  'article-view',\n  '/:app/counter':           'counter-view',\n  '/:app/*':                 'not-found',\n}\n\nconst matcher = createMatcher(routes)\nconst routing = routingPluginFactory(matcher)\n\nexport const config = { models, plugins: { routing } }\n","import{stateEvent as t}from\"./const.js\";function e(e){const s=window.__REDUX_DEVTOOLS_EXTENSION__;if(s){const n=s.connect();let i=!1;e.addEventListener(t,t=>{const{action:s}=t.detail;i?i=!1:n.send(s,e.state)}),n.subscribe(t=>{\"DISPATCH\"===t.type&&t.state&&(i=!0,e.state=JSON.parse(t.state),e.dispatch({}))}),n.init(e.state)}return e}export{e as devtools};\n//# sourceMappingURL=devtools.js.map\n","import{stateEvent as e}from\"./const.js\";function t(t,a){const r={name:location.hostname,storage:localStorage,serializer:JSON,filter:e=>!0,persist:e=>e,delay:0,...a},s=r.storage.getItem(r.name);s&&(t.state={...t.state,...r.serializer.parse(s)});let i=0;return t.addEventListener(e,e=>{const{action:a}=e.detail;r.filter(a)&&(i&&window.clearTimeout(i),i=window.setTimeout(()=>{r.storage.setItem(r.name,r.serializer.stringify(r.persist(t.state))),i=0},r.delay))}),t}export{t as persist};\n//# sourceMappingURL=persist.js.map\n","import { connect } from '@captaincodeman/rdx'\nimport { RoutingState } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\n\nclass AppShellElement extends connect(store, HTMLElement) {\n  private _page: string = ''\n\n  set route(val: RoutingState) {\n    if (val.page !== this._page) {\n      const el = document.createElement(val.page)\n      this.textContent = ''\n      this.appendChild(el)\n      this._page = val.page\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      route: state.routing\n    }\n  }\n}\n\ncustomElements.define('app-shell', AppShellElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\n\nclass CounterElement extends connect(store, HTMLElement) {\n  set count(val: number) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      count: state.counter\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n      <button id=\"dec\">-</button>\n      <span id=\"count\">${this.count}</span>\n      <button id=\"inc\">+</button>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#count')\n    const dec = <HTMLButtonElement>root.querySelector('#dec')\n    const inc = <HTMLButtonElement>root.querySelector('#inc')\n    dec.addEventListener('click', store.dispatch.counter.dec)\n    inc.addEventListener('click', store.dispatch.counter.inc)\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('counter-view', CounterElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from '../store'\nimport { Todo } from '../models/todos'\n\nclass TodoListElement extends connect(store, HTMLElement) {\n  set todos(val: Todo[]) {\n    if (this.el && val.length) {\n      const frag = document.createDocumentFragment()\n      val.forEach(todo => {\n        const li = document.createElement('li')\n        li.innerHTML = `<a href=\"./todos/${todo.id}\" ${todo.completed ? 'completed' : ''}>${todo.title}</a>`\n        frag.appendChild(li)\n      })\n      this.el.textContent = ''\n      this.el.appendChild(frag)\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = ''\n      const li = document.createElement('li')\n      li.textContent = 'Loading ...'\n      this.el!.appendChild(li)\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todos: state.todos.ids.map(id => state.todos.entities[id]),\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = /* html */`\n    <style>\n      a{\n        text-decoration: none;\n      }\n      a[completed] {\n        text-decoration:line-through;\n      }\n    </style>\n    <ul id=\"todos\"></ul>`\n\n    this.el = <HTMLUListElement>root.querySelector('#todos')\n  }\n\n  private el?: HTMLUListElement\n}\n\ncustomElements.define('todos-view', TodoListElement)\n\nclass TodoItemElement extends connect(store, HTMLElement) {\n  set todo(val: Todo) {\n    if (this.el && val) {\n      this.el.textContent = JSON.stringify(val, null, '  ')\n    }\n  }\n\n  set loading(val: boolean) {\n    if (this.el && val) {\n      this.el.textContent = 'Loading ...'\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      loading: state.todos.loading,\n      todo: state.todos.entities[state.todos.selected],\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `<pre id=\"todo\"></pre>`\n\n    this.el = <HTMLPreElement>root.querySelector('#todo')\n  }\n\n  private el?: HTMLPreElement\n}\n\ncustomElements.define('todo-view', TodoItemElement)","import { connect } from '@captaincodeman/rdx'\nimport { store, State } from \"../store\"\n\nfunction createView(name: string, content: string) {\n  customElements.define(name, class extends HTMLElement {\n    connectedCallback() {\n      this.textContent = content\n    }\n  })\n}\n\ncreateView('home-view', 'Home Page')\ncreateView('blog-view', 'Blog Page')\ncreateView('not-found', '404: Not Found')\n\nclass ArticleViewElement extends connect(store, HTMLElement) {\n  set article(val: string) {\n    if (this.el) {\n      this.el.textContent = `${val}`\n    }\n  }\n\n  mapState(state: State) {\n    return {\n      article: state.routing.params.article\n    }\n  }\n\n  constructor() {\n    super()\n    const root = this.attachShadow({ mode: 'open' });\n    root.innerHTML = `Article <span id=\"article\">${this.article}</span>`\n\n    this.el = <HTMLSpanElement>root.querySelector('#article')\n  }\n\n  private el?: HTMLSpanElement\n}\n\ncustomElements.define('article-view', ArticleViewElement)\n"],"names":["o","s","Symbol","e","i","n","c","h","a","l","[object Object]","t","super","this","bind","connectedCallback","disconnectedCallback","mapEvents","addEventListener","removeEventListener","mapState","Object","assign","state","EventTarget","reducer","CustomEvent","cancelable","detail","action","dispatchEvent","indexOf","dispatch","type","payload","r","dispatchPlugin","reducers","effectsPlugin","effects","getState","d","push","queueMicrotask","forEach","window","history","Event","composedPath","find","tagName","href","startsWith","document","baseURI","hasAttribute","getAttribute","includes","target","button","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","parse","pattern","names","replace","match","optional","slice","RegExp","inc","dec","endpoint","entities","ids","selected","loading","select","request","received","id","receivedList","reduce","map","todo","store","todos","resp","fetch","json","length","routing/change","async","page","load","parseInt","params","_store","models","plugins","model","f","onModel","onStore","createStore","routing","transform","change","back","forward","go","pushState","replaceState","location","pathname","preventDefault","routingPluginFactory","routes","patterns","keys","cache","url","parsed","exec","obj","val","index","undefined","createMatcher","/:app/","/:app/blog","/:app/todos","/:app/todos/:id","/:app/article/:article","/:app/counter","/:app/*","__REDUX_DEVTOOLS_EXTENSION__","connect","send","subscribe","JSON","init","devtools","name","hostname","storage","localStorage","serializer","filter","persist","delay","getItem","clearTimeout","setTimeout","setItem","stringify","AppShellElement","HTMLElement","route","_page","el","createElement","textContent","appendChild","customElements","define","CounterElement","root","attachShadow","mode","innerHTML","count","querySelector","counter","TodoListElement","frag","createDocumentFragment","li","completed","title","TodoItemElement","createView","content","ArticleViewElement","article"],"mappings":"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"}