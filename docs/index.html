<!doctype html>
<html lang="en">

<head>
  <title>rdx-example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="Description" content="Example to demonstrate rdx - a tiny state store, like Redux but smaller">
  <meta name="apple-mobile-web-app-title" content="rdx-example">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <base href="/rdx-example/">

  <link rel="manifest" href="manifest.json">
  <link rel="preload" href="scripts/app.js" as="script">

  <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAADspwAA/vnsAO6rAAD///8A7awAAO6sAADvtBcA7q0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzAzMzMzMzMzM0IzMzMzMzMzNHQzMzMzMzMzN3UzMzMzMzMxd3MzMzMzM3dzMzMzMzMzN3czMzMzMzMzR0MzMzMzMzMzdDMzMzMzMzM0YzMzMzMzMzM0MzMzMzMzMzMzMzMzMzMzMzMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon" />
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">

  <style>
    body {
      font-family: 'Roboto', 'Noto', sans-serif;
      line-height: 1.5;
      padding: 12px;
    }

    header {
      margin: 8px;
      padding: 8px;
      line-height: 48px;
    }

    a {
      height: 48px;
      margin: 4px;
      padding: 10px;
      background-color: #eee;
    }

    app-shell {
      display: block;
      margin: 8px;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      white-space: pre;
    }

    img {
      max-width: 100%;
      height: auto;
    }
  </style>

  <!-- hack for SPA on github pages -->
  <script>
    (function(){
      const redirect = sessionStorage.redirect;
      delete sessionStorage.redirect;
      if (redirect && redirect !== location.href) {
        history.replaceState(null, null, redirect);
      }
    })();
  </script>
  <!-- for WebKit / Safari EventTarget constructor: -->
  <script>try{new EventTarget}catch(e){document.write(
    '<script src="scripts/event-target.min.js"><\x2fscript>'
  )}</script>
  <script type="module" src="scripts/app.js"></script>
  <script type="module">
    window.addEventListener('load', async () => {
      const { Workbox } = await import('./scripts/workbox-window.js')
      const wb = new Workbox('sw.js');
      wb.register();
    })
  </script>
  <script defer src="scripts/pwacompat.min.js"></script>
</head>

<body>
  <h1>rdx-example</h1>
  <p>This is a simple example app to demonstrate "rdx" which aims to be "like Redux, but smaller" and with a much simpler API to reduce the amount of boilerplate code required.</p>
  <header>
    <a href="./">home</a>
    <a href="blog">blog</a>
    <a href="todos">todos</a>
    <a href="article/1">article 1</a>
    <a href="article/2">article 2</a>
    <a href="counter">counter</a>
    <a href="unknown">unknown</a>
  </header>
  <app-shell></app-shell>
  <p>The entire app is just <b>3.1 kb</b> minified and gzipped<sup>*</sup>, but includes:</p>
  <ul>
    <li>Redux-like store (actions + reducers + middleware)</li>
    <li>Redux devtool integration</li>
    <li>Utils to reduce store boilerplate</li>
    <li>Persistence / hydration middleware (localStorage)</li>
    <li>Async 'thunk' middleware</li>
    <li>Client-side routing with params</li>
    <li>UI components bound to state store</li>
  </ul>
  <p><small><sup>*</sup> Safari currently requires an extra 590 byte polyfill for EventTarget support</p></small>
  <h2>Usage</h2>
  <p>Each of the nav links above loads a separate view, using the router. The 'todos' link loads some remote JSON data with logic to prevent re-loading if already fetched (including when going between the list & detail views in either direction). Data is persisted to localStorage so the data and counter state is saved between page refreshes - clear that out to see the data re-load.</p>
  <h2>Source-code</h2>
  <p>The source-code for the app is available at <a href="https://github.com/CaptainCodeman/rdx-example" rel="external">github.com/CaptainCodeman/rdx-example</a></p>
  <h2>Source-map</h2>
  <p>Here's the source-map of how the JS bundle size is made up (uncompressed sizes). The 'framework' accounts for about half of the total bundle size, the UI accounts for most of the 'app' part. The rdx libs helps reduce the code needed for the app's state store so as the app grows, the tiny overhead has already been paid and the utils mean less additional code is needed as it does.</p>
  <picture>
    <source srcset="images/sourcemap.webp" type="image/webp">
    <img src="images/sourcemap.png" alt="source-map-explorer view" width="1688" height="910" loading="lazy">
  </picture>
</body>

</html>